(()=>{"use strict";class t{constructor(t,i,e,s){this.borderLimit=i,this.ctx=t,this.sizeFruit=e,this.color=s,this.x=this.getRandomPosition(),this.y=this.getRandomPosition()}generate(){this.x=this.getRandomPosition(),this.y=this.getRandomPosition()}updateGraphic(){this.ctx.fillStyle=this.color,this.ctx.fillRect(this.x,this.y,this.sizeFruit,this.sizeFruit)}getRandomPosition(){return Math.floor(Math.random()*this.borderLimit/this.sizeFruit)*this.sizeFruit}}class i{constructor(t,i,e){this.x=e,this.y=e,this.tail=[],this.directionX=1,this.directionY=0,this.sizePixel=e,this.borderLimit=i,this.canvasContext=t,this.color="green",this.colorHead="blue"}checkColision(){for(let t=0;t<this.tail.length;t++)if(this.tail[t].x==this.x&&this.tail[t].y==this.y)return!0;return!1}updateGraphic(){this.canvasContext.fillStyle=this.color;for(let t=0;t<this.tail.length;t++)this.canvasContext.fillRect(this.tail[t].x,this.tail[t].y,this.sizePixel,this.sizePixel);this.canvasContext.fillStyle=this.colorHead,this.canvasContext.fillRect(this.x,this.y,this.sizePixel,this.sizePixel)}eatFruit(t){return this.x===t.x&&this.y===t.y&&(this.tail.push({x:t.x,y:t.y}),!0)}changeDirection(t){switch(t){case"ArrowLeft":1!==this.directionX&&(this.directionX=-1,this.directionY=0);break;case"ArrowUp":1!==this.directionY&&(this.directionX=0,this.directionY=-1);break;case"ArrowRight":-1!==this.directionX&&(this.directionX=1,this.directionY=0);break;case"ArrowDown":-1!==this.directionY&&(this.directionX=0,this.directionY=1)}}update(){let t=this.tail.length-1;for(let i=0;i<t;i++)this.tail[i]=this.tail[i+1];this.tail[t]={x:this.x,y:this.y},this.x+=this.directionX*this.sizePixel,this.y+=this.directionY*this.sizePixel,this.x>=this.borderLimit?this.x=0:this.x<0&&(this.x=this.borderLimit-this.sizePixel),this.y>=this.borderLimit?this.y=0:this.y<0&&(this.y=this.borderLimit-this.sizePixel)}}const e={a:"ArrowLeft",d:"ArrowRight",s:"ArrowDown",w:"ArrowUp",ArrowLeft:"ArrowLeft",ArrowRight:"ArrowRight",ArrowDown:"ArrowDown",ArrowUp:"ArrowUp"},s=document.getElementById("start"),r=document.getElementById("finish"),n=document.getElementById("canvas").getContext("2d"),h=600,o=new class{constructor(t,i){this.canvasContext=i,this.canvasSize=t,this.color="white"}createGraphicWithText(t,i,e,s,r){this.canvasContext.font=`${t}px Arial`,this.canvasContext.fillStyle=this.color,this.canvasContext.fillText(i+e,s,r)}createGraphic(){}}(h,n);var a;var c,l,d=0;function x(){c.update(),c.checkColision()?function(){d=0,clearInterval(a);let t=h/2-110,i=h/2;o.createGraphicWithText(40,"Game Over","",t,i)}():(c.eatFruit(l)&&(d++,l.generate()),y())}function y(){n.clearRect(0,0,h,h),c.updateGraphic(),l.updateGraphic(),o.createGraphicWithText(20,"Score: ",d,15,25)}s.addEventListener("click",(function s(){a?(clearInterval(a),a=!1,d=0,s()):(document.getElementById("canvas").style.display="flex",document.getElementById("finish").style.display="block",document.getElementById("start").textContent="Restart",c=new i(n,h,20),l=new t(n,h,20,"red"),function(t,i){t.addEventListener("keydown",(t=>{i.changeDirection(e[t.key])}))}(document,c),y(),a=setInterval(x,80))})),r.addEventListener("click",(function(){document.getElementById("canvas").style.display="none",document.getElementById("finish").style.display="none",document.getElementById("start").textContent="Start",d=0,clearInterval(a)}))})();